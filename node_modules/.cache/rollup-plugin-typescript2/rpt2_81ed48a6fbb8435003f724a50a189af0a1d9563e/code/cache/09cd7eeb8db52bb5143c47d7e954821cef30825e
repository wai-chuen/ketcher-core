{"code":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport { TextCommand, Vec2 } from \"../../../domain/entities\";\r\nimport { flatten, isEqual } from 'lodash/fp';\r\nimport { LayerMap } from './generalEnumTypes';\r\nimport ReObject from './reobject';\r\nimport { Scale } from \"../../../domain/helpers\";\r\nconst SCALE = 40; // from ketcher-core\r\nclass ReText extends ReObject {\r\n    item;\r\n    paths = [];\r\n    constructor(text) {\r\n        super('text');\r\n        this.item = text;\r\n    }\r\n    static isSelectable() {\r\n        return true;\r\n    }\r\n    getReferencePoints() {\r\n        if (!this.paths.length)\r\n            return [];\r\n        const { p0, p1 } = this.getRelBox(this.paths);\r\n        const p = this.item.position;\r\n        const width = Math.abs(Vec2.diff(p0, p1).x) / SCALE;\r\n        const height = Math.abs(Vec2.diff(p0, p1).y) / SCALE;\r\n        const refPoints = [];\r\n        refPoints.push(this.item.position, new Vec2(p.x, p.y + height), new Vec2(p.x + width, p.y + height), new Vec2(p.x + width, p.y));\r\n        return refPoints;\r\n    }\r\n    hoverPath(render) {\r\n        const { p0, p1 } = this.getRelBox(this.paths);\r\n        const topLeft = p0.sub(render.options.offset);\r\n        const { x: width, y: height } = p1.sub(p0);\r\n        return render.paper.rect(topLeft.x, topLeft.y, width, height, 5);\r\n    }\r\n    getRelBox(paths) {\r\n        const firstElOfFirstRow = paths[0][0];\r\n        const leftEdge = firstElOfFirstRow.getBBox().x;\r\n        const firstRow = paths[0];\r\n        const topEdge = Math.min(...firstRow.map((path) => path.getBBox().y));\r\n        const widestRow = paths.reduce((widestRow, nextRow) => this.getRowWidth(nextRow) > this.getRowWidth(widestRow)\r\n            ? nextRow\r\n            : widestRow, paths[0]);\r\n        const lastElOfWidestRow = widestRow[widestRow.length - 1];\r\n        const rightEdge = lastElOfWidestRow.getBBox().x + lastElOfWidestRow.getBBox().width;\r\n        const lastRow = paths[paths.length - 1];\r\n        const bottomEdge = Math.max(...lastRow.map((path) => path.getBBox().y + path.getBBox().height));\r\n        return {\r\n            p0: new Vec2(leftEdge, topEdge),\r\n            p1: new Vec2(rightEdge, bottomEdge)\r\n        };\r\n    }\r\n    getRowWidth(row) {\r\n        return row.reduce((rowWidth, nextRow) => {\r\n            rowWidth += nextRow.getBBox().width;\r\n            return rowWidth;\r\n        }, 0);\r\n    }\r\n    drawHover(render) {\r\n        if (!this.paths.length)\r\n            return null;\r\n        const ret = this.hoverPath(render).attr(render.options.hoverStyle);\r\n        render.ctab.addReObjectPath(LayerMap.hovering, this.visel, ret);\r\n        return ret;\r\n    }\r\n    makeSelectionPlate(restruct, paper, options) {\r\n        if (!this.paths.length || !paper)\r\n            return null;\r\n        return this.hoverPath(restruct.render).attr(options.selectionStyle);\r\n    }\r\n    show(restruct, _id, options) {\r\n        const render = restruct.render;\r\n        const paper = render.paper;\r\n        const paperScale = Scale.obj2scaled(this.item.position, options);\r\n        let shiftY = 0;\r\n        this.paths = [];\r\n        // TODO: create parser in ketcher-core package\r\n        const rawContentState = this.item.content\r\n            ? JSON.parse(this.item.content)\r\n            : null;\r\n        if (!rawContentState) {\r\n            return;\r\n        }\r\n        rawContentState.blocks.forEach((block) => {\r\n            const ranges = this.getRanges(block, options);\r\n            let shiftX = 0;\r\n            const row = [];\r\n            ranges.forEach(([start, end, styles]) => {\r\n                block.text = block.text.replace(/[^\\S\\r\\n]/g, '\\u00a0');\r\n                const path = paper\r\n                    .text(paperScale.x, paperScale.y, block.text.substring(start, end + 1) || '\\u00a0')\r\n                    .attr({\r\n                    font: options.font,\r\n                    'font-size': options.fontsz,\r\n                    'text-anchor': 'start',\r\n                    fill: '#000000',\r\n                    ...styles\r\n                });\r\n                path.translateAbs(shiftX, shiftY + (styles.shiftY || 0));\r\n                row.push(path);\r\n                shiftX += path.getBBox().width;\r\n            });\r\n            this.paths.push(row);\r\n            const { p0, p1 } = this.getRelBox([row]);\r\n            shiftY += Math.abs(Vec2.diff(p0, p1).y);\r\n        });\r\n        this.item.setPos(this.getReferencePoints());\r\n        render.ctab.addReObjectPath(LayerMap.data, this.visel, flatten(this.paths), null, true);\r\n    }\r\n    getRanges(block, options) {\r\n        const ranges = [];\r\n        let start = 0;\r\n        let styles = this.getStyles(block, start, options);\r\n        for (let i = 1; i < block.text.length; i++) {\r\n            const nextStyles = this.getStyles(block, i, options);\r\n            if (!isEqual(styles, nextStyles)) {\r\n                ranges.push([start, i - 1, styles]);\r\n                styles = nextStyles;\r\n                start = i;\r\n            }\r\n        }\r\n        ranges.push([start, block.text.length - 1, styles]);\r\n        return ranges;\r\n    }\r\n    getStyles(block, index, options) {\r\n        const ranges = block.inlineStyleRanges.filter((inlineRange) => inlineRange.offset <= index &&\r\n            index < inlineRange.offset + inlineRange.length);\r\n        const customFontSize = ranges.reduce((acc, range) => {\r\n            if (range.style.includes(TextCommand.FontSize)) {\r\n                return range.style.match(/\\d+/)?.[0];\r\n            }\r\n            return acc;\r\n        }, null);\r\n        return ranges.reduce((styles, textRange) => {\r\n            const fontsz = customFontSize || options.fontsz;\r\n            const fontszsub = (customFontSize || options.fontszsub) * 0.8;\r\n            switch (textRange.style) {\r\n                case TextCommand.Bold:\r\n                    styles['font-weight'] = 'bold';\r\n                    break;\r\n                case TextCommand.Italic:\r\n                    styles['font-style'] = 'italic';\r\n                    break;\r\n                case TextCommand.Subscript:\r\n                    styles['font-size'] = fontszsub + 'px';\r\n                    styles.shiftY = fontsz / 3;\r\n                    break;\r\n                case TextCommand.Superscript:\r\n                    styles['font-size'] = fontszsub + 'px';\r\n                    styles.shiftY = -fontsz / 3;\r\n                    break;\r\n                case `${TextCommand.FontSize}_${customFontSize}px`:\r\n                    styles['font-size'] = customFontSize + 'px';\r\n                    break;\r\n                default:\r\n            }\r\n            return styles;\r\n        }, {});\r\n    }\r\n}\r\nexport default ReText;\r\n//# sourceMappingURL=retext.js.map","references":["/usr/local/google/home/waich/workspace/ketcher/node_modules/@types/draft-js/index.d.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/domain/entities/index.ts","/usr/local/google/home/waich/workspace/ketcher/node_modules/@types/lodash/fp.d.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/application/render/restruct/generalEnumTypes.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/application/render/restruct/reobject.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/application/render/restruct/restruct.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/domain/helpers/index.ts","/usr/local/google/home/waich/workspace/ketcher/node_modules/raphael/raphael.min.js"],"map":"{\"version\":3,\"file\":\"retext.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/application/render/restruct/retext.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/node_modules/.cache/rollup-plugin-typescript2/placeholder/application/render/restruct/retext.d.ts","writeByteOrderMark":false,"text":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport { RawDraftContentBlock } from 'draft-js';\r\nimport { Text, Vec2 } from \"../../../domain/entities\";\r\nimport ReObject from './reobject';\r\nimport ReStruct from './restruct';\r\nimport { RaphaelBaseElement } from 'raphael';\r\ndeclare class ReText extends ReObject {\r\n    private item;\r\n    paths: Array<Array<RaphaelBaseElement>>;\r\n    constructor(text: Text);\r\n    static isSelectable(): boolean;\r\n    getReferencePoints(): Array<Vec2>;\r\n    hoverPath(render: any): any;\r\n    getRelBox(paths: Array<Array<RaphaelBaseElement>>): {\r\n        p0: Vec2;\r\n        p1: Vec2;\r\n    };\r\n    getRowWidth(row: Array<RaphaelBaseElement>): number;\r\n    drawHover(render: any): any;\r\n    makeSelectionPlate(restruct: ReStruct, paper: any, options: any): any;\r\n    show(restruct: ReStruct, _id: number, options: any): void;\r\n    getRanges(block: RawDraftContentBlock, options: any): Array<[number, number, Record<string, any>]>;\r\n    getStyles(block: RawDraftContentBlock, index: number, options: any): Record<string, string>;\r\n}\r\nexport default ReText;\r\n"}}
