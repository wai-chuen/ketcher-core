{"code":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport { Box2Abs, Fragment, StereoFlag } from \"../../../domain/entities\";\r\nimport { LayerMap } from './generalEnumTypes';\r\nimport ReObject from './reobject';\r\nimport { Scale } from \"../../../domain/helpers\";\r\nclass ReEnhancedFlag extends ReObject {\r\n    #path;\r\n    constructor() {\r\n        super('enhancedFlag');\r\n    }\r\n    static isSelectable() {\r\n        return true;\r\n    }\r\n    hoverPath(render) {\r\n        const box = Box2Abs.fromRelBox(this.#path.getBBox());\r\n        const sz = box.p1.sub(box.p0);\r\n        const p0 = box.p0.sub(render.options.offset);\r\n        return render.paper.rect(p0.x, p0.y, sz.x, sz.y);\r\n    }\r\n    drawHover(render) {\r\n        // TODO: after the enhanced flag stops being displayed, need to remove the reEnhancedflag object from ctab\r\n        if (!this.#path?.attrs)\r\n            return null;\r\n        const ret = this.hoverPath(render).attr(render.options.hoverStyle);\r\n        render.ctab.addReObjectPath(LayerMap.hovering, this.visel, ret);\r\n        return ret;\r\n    }\r\n    makeSelectionPlate(restruct, _paper, options) {\r\n        // TODO: after the enhanced flag stops being displayed, need to remove the reEnhancedflag object from ctab\r\n        if (!this.#path?.attrs)\r\n            return null;\r\n        return this.hoverPath(restruct.render).attr(options.selectionStyle);\r\n    }\r\n    show(restruct, fragmentId, options) {\r\n        const render = restruct.render;\r\n        const fragment = restruct.molecule.frags.get(fragmentId);\r\n        if (!fragment?.enhancedStereoFlag)\r\n            return;\r\n        const position = fragment.stereoFlagPosition\r\n            ? fragment.stereoFlagPosition\r\n            : Fragment.getDefaultStereoFlagPosition(restruct.molecule, fragmentId);\r\n        const paper = render.paper;\r\n        const ps = Scale.obj2scaled(position, options);\r\n        const stereoFlagMap = {\r\n            [StereoFlag.Abs]: options.absFlagLabel,\r\n            [StereoFlag.And]: options.andFlagLabel,\r\n            [StereoFlag.Mixed]: options.mixedFlagLabel,\r\n            [StereoFlag.Or]: options.orFlagLabel\r\n        };\r\n        if (options.showStereoFlags && !options.ignoreChiralFlag) {\r\n            this.#path = paper\r\n                .text(ps.x, ps.y, fragment.enhancedStereoFlag\r\n                ? stereoFlagMap[fragment.enhancedStereoFlag]\r\n                : '')\r\n                .attr({\r\n                font: options.font,\r\n                'font-size': options.fontsz,\r\n                fill: '#000'\r\n            });\r\n        }\r\n        render.ctab.addReObjectPath(LayerMap.data, this.visel, this.#path, null, true);\r\n    }\r\n}\r\nexport default ReEnhancedFlag;\r\n//# sourceMappingURL=reenhancedFlag.js.map","references":["/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/domain/entities/index.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/application/render/restruct/generalEnumTypes.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/application/render/restruct/reobject.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/application/render/restruct/restruct.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/application/render/raphaelRender.js","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/domain/helpers/index.ts"],"map":"{\"version\":3,\"file\":\"reenhancedFlag.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/application/render/restruct/reenhancedFlag.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/node_modules/.cache/rollup-plugin-typescript2/placeholder/application/render/restruct/reenhancedFlag.d.ts","writeByteOrderMark":false,"text":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport ReObject from './reobject';\r\nimport ReStruct from './restruct';\r\nimport { Render } from '../raphaelRender';\r\ndeclare class ReEnhancedFlag extends ReObject {\r\n    #private;\r\n    constructor();\r\n    static isSelectable(): boolean;\r\n    hoverPath(render: Render): any;\r\n    drawHover(render: Render): any;\r\n    makeSelectionPlate(restruct: ReStruct, _paper: any, options: any): any;\r\n    show(restruct: ReStruct, fragmentId: number, options: any): void;\r\n}\r\nexport default ReEnhancedFlag;\r\n"}}
