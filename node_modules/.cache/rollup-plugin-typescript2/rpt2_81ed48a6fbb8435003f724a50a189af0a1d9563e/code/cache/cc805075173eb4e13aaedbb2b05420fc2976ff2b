{"code":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nimport { AtomAdd, FragmentAdd } from '../operations';\r\nimport { Action } from './action';\r\nimport { Vec2 } from \"../../../domain/entities\";\r\nimport { atomGetAttr } from './utils';\r\nimport { fromBondAddition } from './bond';\r\nexport function fromChain(restruct, p0, v, nSect, atomId) {\r\n    // eslint-disable-line max-params\r\n    const dx = Math.cos(Math.PI / 6);\r\n    const dy = Math.sin(Math.PI / 6);\r\n    let action = new Action();\r\n    const frid = atomId !== null\r\n        ? atomGetAttr(restruct, atomId, 'fragment')\r\n        : action.addOp(new FragmentAdd().perform(restruct)).frid;\r\n    const chainItems = {\r\n        atoms: [],\r\n        bonds: []\r\n    };\r\n    let id0 = atomId !== null\r\n        ? atomId\r\n        : action.addOp(new AtomAdd({ label: 'C', fragment: frid }, p0).perform(restruct)).data.aid;\r\n    chainItems.atoms.push(id0);\r\n    action.operations.reverse();\r\n    for (let i = 0; i < nSect; i++) {\r\n        const pos = new Vec2(dx * (i + 1), i & 1 ? 0 : dy).rotate(v).add(p0);\r\n        const ret = fromBondAddition(restruct, {}, id0, {}, pos);\r\n        action = ret[0].mergeWith(action);\r\n        id0 = ret[2];\r\n        chainItems.bonds.push(ret[3]);\r\n        chainItems.atoms.push(id0);\r\n    }\r\n    return [action, chainItems];\r\n}\r\n//# sourceMappingURL=chain.js.map","references":["/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/application/editor/operations/index.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/application/editor/actions/action.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/domain/entities/index.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/application/editor/actions/utils.ts","/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/src/application/editor/actions/bond.ts"],"map":"{\"version\":3,\"file\":\"chain.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/application/editor/actions/chain.ts\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;6EAc6E;AAE7E,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,eAAe,CAAA;AAEpD,OAAO,EAAE,MAAM,EAAE,MAAM,UAAU,CAAA;AACjC,OAAO,EAAE,IAAI,EAAE,iCAAuB;AACtC,OAAO,EAAE,WAAW,EAAE,MAAM,SAAS,CAAA;AACrC,OAAO,EAAE,gBAAgB,EAAE,MAAM,QAAQ,CAAA;AAEzC,MAAM,UAAU,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM;IACtD,iCAAiC;IACjC,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAA;IAChC,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAA;IAEhC,IAAI,MAAM,GAAG,IAAI,MAAM,EAAE,CAAA;IAEzB,MAAM,IAAI,GACR,MAAM,KAAK,IAAI;QACb,CAAC,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,EAAE,UAAU,CAAC;QAC3C,CAAC,CAAE,MAAM,CAAC,KAAK,CAAC,IAAI,WAAW,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAiB,CAAC,IAAI,CAAA;IAE7E,MAAM,UAAU,GAAQ;QACtB,KAAK,EAAE,EAAE;QACT,KAAK,EAAE,EAAE;KACV,CAAA;IAED,IAAI,GAAG,GACL,MAAM,KAAK,IAAI;QACb,CAAC,CAAC,MAAM;QACR,CAAC,CACG,MAAM,CAAC,KAAK,CACV,IAAI,OAAO,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAEpE,CAAC,IAAI,CAAC,GAAG,CAAA;IAEhB,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;IAC1B,MAAM,CAAC,UAAU,CAAC,OAAO,EAAE,CAAA;IAE3B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE;QAC9B,MAAM,GAAG,GAAG,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;QAEpE,MAAM,GAAG,GAAG,gBAAgB,CAAC,QAAQ,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,CAAC,CAAA;QACxD,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,CAAA;QACjC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAA;QACZ,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;QAC7B,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;KAC3B;IAED,OAAO,CAAC,MAAM,EAAE,UAAU,CAAC,CAAA;AAC7B,CAAC\"}","dts":{"name":"/usr/local/google/home/waich/workspace/ketcher/packages/ketcher-core/node_modules/.cache/rollup-plugin-typescript2/placeholder/application/editor/actions/chain.d.ts","writeByteOrderMark":false,"text":"/****************************************************************************\r\n * Copyright 2021 EPAM Systems\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n ***************************************************************************/\r\nexport declare function fromChain(restruct: any, p0: any, v: any, nSect: any, atomId: any): any[];\r\n"}}
